{% extends "base.jinja2" %}

{% block body %}

<h1>{{ group.name }}</h1>
<div id="group-page-profile-photo">
<img src="../static/img/dog3.jpg" alt="Pesonal Profile Photo" class="group-page-profile-photo">
<div>

<div>
<p>{{ group.description }}</p>
</div>

<h1>Group Food Profile</h1>
<div id="group_taste_buttons">
<p>
{% for taste in group.food_profile %}
    {{ taste.taste }}
{% endfor %}
{% for diet in group.diet_restrict %}
    {{ diet.diet }}
{% endfor %}
</p>
<p>{{ price }}</p>
<p>{{ location }}</p>
<p>{{ age }}</p>

</div>

<h2> Members </h2>
<div id = "members_container">
<ul>
<!-- only list 8 -->
    {% for member in members %}
    <li><a href="{{ request.route_url('profile_detail', username=member.username)}}">{{ member.username }}</a></li>
    {% endfor %}
</ul>
</div>

<section id='forum'>
<h2> Want to plan an event? Start a discussion!!!</h2>

<div id="#form-container">
<form id="leave-comment-form" action="{{ request.route_url('group_detail', group_id=group.id) }}" method='POST'>
    <label>Discussion Topic</label>
    <div class="field-group">
        <input type="text" name="title" placeholder="What do you want to do?"/>
    </div>
    <input id="save_discussion" type="submit" name="save_discussion" value="discussion"/>
</form>
</div>

    {% for discussion in discussions %}
    <article class="discussion" id="{{ discussion.id }}">
        <h3>{{ discussion.title }}</a></h3>
        <hr/>

        {% for post in posts %}
            <div class="post">
            {% if post.discussion_id == discussion.id %}
                <p>{{ post.text }}</p>
            {% endif %}
            </div>
        {% endfor %}

    </article>
    <form id="leave-post-form" action="{{ request.route_url('group_discussion', group_id=group.id, discussion_id=discussion.id) }}" method='POST'>
    <label>Comment</label>
    <div class="field-group">
        <textarea name="text" rows="2" cols="80" placeholder='Write a comment...'></textarea>
    </div>
    <input id="save_post" type="submit" name="save_post" value="post"/>
    </form>
    {% endfor %}

    {% if not discussions %}
        <div class="entry">
            <p><em>No one has planned anything yet. Start a discussion!</em></p>
        </div>
    {% endif %}
</section>


<div id="#form-container">
<form id="join-group-form" action="{{ request.route_url('group_detail', group_id=group.id) }}">
<input id="join_group_button" type="submit" name="join_group" value="Join Group"/>
</form>
</div>

<nav>
<!-- Only for admin! -->
    <ul>
    <li><a href="{{ request.route_url('group_edit', group_id=group.id) }}">Edit Group</a></li>
    <li><a href="{{ request.route_url('profile_detail', username='admin.username') }}">Delete Group</a><li>
    </ul>
</nav>
{% endblock %}